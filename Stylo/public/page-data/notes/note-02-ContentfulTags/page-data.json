{"componentChunkName":"component---src-templates-note-post-js","path":"/notes/note-02-ContentfulTags/","result":{"data":{"markdownRemark":{"id":"14c21437-49b1-51c3-bb28-5f020a16a23b","html":"<p>Contentfulは、何というかHello Worldなお世界というか、あぁこれが世界かぁ！と井の中の蛙、今更に大海を知るみたいなワクワク感がたくさんあって。</p>\n<p>まずは「Locale設定」で記事が2つずつ重複表示されたときに、日本語あるいはOne-languageでしか記事を書くつもりがない人間には、一見迷惑な高機能に思えるのだが、--hoge.com/jp/とか、--hoge.com/en/とか・・・あぁこうやって世界同時発信みたいなことができちゃうわけか！とお上りさん興奮しまスた。なユーザー体験にはじまり</p>\n<p>Starterとして使っているContentful社製テーマのお作法がとても潔く正しいところも気に入っている。</p>\n<p>たとえば、<a href=\"/blog\">Bolg</a>トップページでWordPressみたいな抜粋文...文字数上限まで自動抽出 -\nといったルーズ作法でなく、ディスクリプションを最初から指定されてて、（そだよね。記事概要くらい筆者が書くべき、そらそうだ）と本当に今更まともなことを突きつけられた気になったり。</p>\n<hr>\n<h3>で。本題のTagsの話</h3>\n<p>Starterでは最初から全ての見本記事にTagがつけられており、<a href=\"/blog\">Bolg</a>トップページにあるTag表示も、componentsに用意されていた。</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 756px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/274cafb9a3c22746f74fc289d6dbe4e8/8ae3e/2023-06-04-1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 35.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6klEQVR42o1Qi26DMAzk/79x0qSqKhBCEkLivICrYgZr2SbNkuWzlZzv3KSc4XzANbZtw7ptXA/82v+VTSkLQkjwFOAcYZ4945P4t0Xr+iOXr9qkXNBLjXsr0EsFYx26QaEVI8SoMXuCVBO6ofbmXHZVu54Kl4VJhNQwdoYPEaOemFSqnWA0FkIqJg4xHlLfVB9emlwKWw4xodr/T1zv9jpny49+wMfnDa2QmGbPCtVkoYyFdcS4qqyKpZ74DNUJxQRHAfdHh1EbVC4mpBjhiPhBTJnVhrRnzHnH8TvrrP5LpXB1nkAhIpcFT0TrIs9FjcR+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"BlogPostで入力するTag\" title=\"\" src=\"/static/274cafb9a3c22746f74fc289d6dbe4e8/8ae3e/2023-06-04-1.png\" srcset=\"/static/274cafb9a3c22746f74fc289d6dbe4e8/63868/2023-06-04-1.png 250w,\n/static/274cafb9a3c22746f74fc289d6dbe4e8/0b533/2023-06-04-1.png 500w,\n/static/274cafb9a3c22746f74fc289d6dbe4e8/8ae3e/2023-06-04-1.png 756w\" sizes=\"(max-width: 756px) 100vw, 756px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p><strong>Editor</strong> でも記事の中に入力フィールドが。</p>\n<hr>\n<p>しかし、<strong>Editor</strong> 上のタブが気になる。</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 805px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2d3a36b5f7b9d406dd97c9d9682c0474/c946b/2023-06-04-2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 7.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAW0lEQVR42nXKUQqDMBREUfe/wq7AShMTIyUS8+ZdSQv9sgOHgWGmUo3Hs5GrOFsjxMxrCAlJ5G1nXiIxFeYlkHJhxN1vTeUQ69sYbRJmX70bkiN3utnP+Hz2Py4MKJw+plj9xAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Tagsタブ\" title=\"\" src=\"/static/2d3a36b5f7b9d406dd97c9d9682c0474/c946b/2023-06-04-2.png\" srcset=\"/static/2d3a36b5f7b9d406dd97c9d9682c0474/63868/2023-06-04-2.png 250w,\n/static/2d3a36b5f7b9d406dd97c9d9682c0474/0b533/2023-06-04-2.png 500w,\n/static/2d3a36b5f7b9d406dd97c9d9682c0474/c946b/2023-06-04-2.png 805w\" sizes=\"(max-width: 805px) 100vw, 805px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>タブを切り替えると、こんなイラスト付きでお薦めしてくる。\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/2018656f25584d5544025d5910e9b84c/f058b/2023-06-04-4.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 79.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACtUlEQVR42n2Ty08TcRDHe/NfUO9G4z9gYuJFjUcTTDAxBBPBkzf15sHERC8+oqhBCAZ8ABKNGERENAK+UCTyRh6BAu22SxfafbZsu4+P2W2X8nSS2d/s7sx3vvObmRDrxHXdNdtxXLaTnOuwXUxwhoKX4INiWJi5fJCsWximRYs6xdVEH+djnzgrdPFVj/FSmWbVttgcHwoMu8BoaFbx1XFsugeXWUxmqJS6OBF5zQmhlUtSL3dW/nBGaCdDLl/NuspCRboutgsNPRJPv6zQN5flSotA50iSSdGiazRN8/cETf2rjAo52kdMmgcy6KazsWTPCDL8WrA5ejPOrXcJGn6qHL4+y67TzVx8Pk5ZvcSpqnFKamQqGjOU1imceyYjqvYGlqGAXdaGZNrk5c8k1a1tDA/94fKLCMcqryFM/2bwb4TO3h5mUibjQpQR0WBi2cGyt2GI65B2QE108Ku/k8rhGu7Gazk01cjx/lqeR55QP3uPmZkLsFgO86U44XKy6YkCWLHzawy9xiryN95/7eXAtzp2D91m70QtByNN7F+opyT+ClGsIxWpIjp3l0zsIdgGbh5x89jkH16e/rDJm7kE7fEk+yafsWe6miNvOyivH+TkvVHu/0gxZ4Dl0yiMzJaScQuZnIIbrNrQrod5LI/xqGeGho9husfipLRMwccuLsJ2YxOotyGWbftzSBF/3Wo45HIWjuNsiNsy2OtF1TQWIgLRuEg8IbEkrRATJaKxJcSEhBATEZekLXEels8wm8uh6Qa6kUbVdBRVQ1ZUZEXzVdN0NF33bVU3fJ+UrPoxgRrpTLFkj75l2ViW5Tt7gR5oUlZ8ML0AtgbqJ9X9/6aZ9a/I0x1Lzk9+/uwe1yh7EKaiZp4brXH+J2slb77coDmeTEQzPPywRN3nBG0DKXbyD5ryD9Men7o05ZyJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"オーガナイズ・ユア・コンテンツ・ウィズ・Tags\" title=\"\" src=\"/static/2018656f25584d5544025d5910e9b84c/f058b/2023-06-04-4.png\" srcset=\"/static/2018656f25584d5544025d5910e9b84c/63868/2023-06-04-4.png 250w,\n/static/2018656f25584d5544025d5910e9b84c/0b533/2023-06-04-4.png 500w,\n/static/2018656f25584d5544025d5910e9b84c/f058b/2023-06-04-4.png 630w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></p>\n<hr>\n<p>使いはじめてみると、この絵の最適解ぶりがわかるんですが、<strong>Content model</strong>\n/ <strong>Content Type</strong> の垣根なしにContentfulのステージにあるもの全てから検索・フィルタリングができる優れものらしいんですね。</p>\n<hr>\n<p>私は個人使いでしかも日が浅い・記事もメディアも少ない・で、宝の持ち腐れてますが、プロジェクト毎に紐づけられたり、チーム名をつけられたり、年度をサクッと分けられたり、（済）マークだって良いわけで、用途を想像すると素晴らしい。\nTwitterのハッシュタグのようなイメージですかねぇ。<br>\n </p>\n<p>というかハッシュタグの語源 <strong>hash</strong> がプログラム関数で便利なもの、だけど最初は理解が難しいものでしたね。<br>\n遠い昔に家人から「ハッシュド・ビーフてのがあるだろう？」と習った記憶がありますが。<br>\n </p>\n<p>閑話休題。</p>\n<p>実際に<strong>Blog Post</strong>にTagsを設定した画面。</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 908px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/08e55511420deb1eddb253d8739f5711/a2b88/2023-06-04-3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 37.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0ElEQVR42pWQi07DMBAE8//fCFUiFBUoiWMnafy6m8qGUqhEaVda2ZLt8e411i2YNdMOiZAyk50ZjCXGVPdmcozG4n2gSEQRvVhVAa1nqNLUSwqbjxw3zy3pF+DaZk30Y2D1mebzB/Ah8H74uPnwL6cs+Chk0QswpoybV5Z1Yyv1tDZARP51YZQ1i/wEJgbjeD2MuPnIFCaWuNyd+DzPb2CIia5/46nrMXamW9oKPQPv1S9g+7KvwMnN7NzzQwn1OmHpX0AlXZnh6Ad89g8nPAGP1nWrm7i0cAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"2023 06 04 3\" title=\"\" src=\"/static/08e55511420deb1eddb253d8739f5711/a2b88/2023-06-04-3.png\" srcset=\"/static/08e55511420deb1eddb253d8739f5711/63868/2023-06-04-3.png 250w,\n/static/08e55511420deb1eddb253d8739f5711/0b533/2023-06-04-3.png 500w,\n/static/08e55511420deb1eddb253d8739f5711/a2b88/2023-06-04-3.png 908w\" sizes=\"(max-width: 908px) 100vw, 908px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>Contentful Tagsは、\n<strong>private</strong> /or/ <strong>public</strong> を最初に決めるので、Contentfulのステージ内でプライベートに使う用途でない場合、つまり<strong>Blog Post</strong>のように外から取り出して使いたい場合は <strong>public</strong> で登録します。</p>\n<hr>\n<p>Starterで最初についていたTagsは、GraphQLとしては</p>\n\n        <div class=\"gatsby-code-title\">\n          <span>graphql---BlogPost.tags</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token object\">allContentfulBlogPost</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">nodes</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">title</span>\n      <span class=\"token property\">slug</span>\n\t  <span class=\"token property\">body</span>\n\t  <span class=\"token property\">tags</span>\n\t  <span class=\"token operator\">...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>と、BlogPostモデルの中にありました。</p>\n<h2>Contentful Tags の場合</h2>\n<p>2つの取り出し方があるので、実装も楽。</p>\n\n        <div class=\"gatsby-code-title\">\n          <span>graphql---BlogPost.metadata.tags</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token object\">allContentfulBlogPost</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token object\">nodes</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">title</span>\n            <span class=\"token property\">slug</span>\n            <span class=\"token object\">metadata</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token object\">tags</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">contentful_id</span>\n                <span class=\"token property\">name</span>\n              <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n\n        <div class=\"gatsby-code-title\">\n          <span>graphql---ContentfulTag.</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token object\">allContentfulTag</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token object\">nodes</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">contentful_id</span>\n            <span class=\"token property\">name</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n<hr>\n<p><strong>gatsby-node.js</strong> での <strong>createPage</strong> がとても楽にできそうだ、というのは <strong>GraphQL</strong> を少し触ったことがあれば一目瞭然。</p>\n<p>ただBlog Postの方で、開発環境では簡単に設定できたはずが、Buildエラーが出てしまうなど作業後半で困惑した部分がありました。<br>\n理由がわかると、当然といえば当然かっ！な原因でしたが、何せ情報が少ない。<br>\n </p>\n<p>Gatsby.jsでTagsという頭の硬さでググったのが敗因とも言えますが、Gatsbyで, Contentfulで, Markdown勢のfrontmatterではなく！とニッチをいくと酸味を味わうことになりますが・・・</p>\n<p>わたくし<strong>スッパムーチョ</strong>とか酸味・大好き人間。<br>\nこの機会にChatGPTと触れ合ったりして <strong>←</strong> 一方的に縋りついただけ<br>\nすげぇなぁこの人！ と感動したり。<strong>←</strong> だから。人ではない。</p>\n<p>苦労・辛酸を舐めても成果物さえできてしまえば、過程もまた楽し。と振り返る余裕でき。<br>\n思ったより長い記事になったので、分割掲載にします。</p>\n<!-- EOF -->","timeToRead":3,"frontmatter":{"title":"BlogにContentfulのTags機能を追加した","date":"2023/06/04","description":"Gatsby+Contentful Tags","slug":"note-02-ContentfulTags","featuredImage":null}}},"pageContext":{"slug":"note-02-ContentfulTags","previous":"note-03-ContentfulTags2","next":"note-01-styles","previousTitle":"BlogにTags機能をつける工程","nextTitle":"Article Style Variables","id":"14c21437-49b1-51c3-bb28-5f020a16a23b"}},"staticQueryHashes":["2507079572"],"slicesMap":{}}