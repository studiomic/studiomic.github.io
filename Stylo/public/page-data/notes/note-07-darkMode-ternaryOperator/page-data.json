{"componentChunkName":"component---src-templates-note-post-js","path":"/notes/note-07-darkMode-ternaryOperator/","result":{"data":{"markdownRemark":{"id":"bf97987d-cda4-5fe0-94da-fbe22ca29752","html":"<section style=\"margin-bottom: 5em;\">\nもはやタイトルに曲名の余韻もない。<br>\nNotesにはフィーチャーイメージなんぞいらねーと思ってたのに、JOJO-Tシャツ届くと人が変わる。<br>\n横幅マイナスマージンまでかけて宣伝します。9部「ジョジョ・ランド」パラレルワールドのジョルノ来たよ💜\n<p>どんな悪いことやってくれるのか、今から楽しみだ。</p>\n</section>\n<section style=\"margin-bottom: 6em;\">\nそれにしてもGrapQLというのは便利すぎる。思い立って2分でデータ持って来れるとか目眩しますね。\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\">featuredImage <span class=\"token punctuation\">{</span>\n\tchildImageSharp <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">gatsbyImageData</span><span class=\"token punctuation\">(</span>width<span class=\"token operator\">:</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">placeholder</span><span class=\"token operator\">:</span> <span class=\"token constant\">BLURRED</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>表示側もほぼ4行だし</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> featuredImg <span class=\"token operator\">=</span> <span class=\"token function\">getImage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">posts<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>featuredImage<span class=\"token operator\">?.</span>childImageSharp<span class=\"token operator\">?.</span>gatsbyImageData</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">{</span>featuredImg <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>featuredImg<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GatsbyImage</span></span> <span class=\"token attr-name\">image</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>featuredImg<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Gatsbyさんは異常に親切だし\n<a href=\"https://www.gatsbyjs.com/docs/how-to/images-and-media/working-with-images-in-markdown/\">Working with Images in Markdown &#x26; MDX | Gatsby</a></p>\n<p>Gatsbyjs Markdown Staticimage でググって4分くらいでもう絵が出てるってどんなお世界。素敵。</p>\n</section>\n<section style=\"margin-bottom: 4em;\">\n<h1>gatsby-plugin-use-dark-mode + use-dark-mode</h1>\n<p>ダークモードは表題の2つを利用しました。<br>\nおそらくは<strong>gatsby-plugin-dark-mode</strong> というプラグインを使った方が簡単だったのでは、と思います。<br>\nいくつか読んでいた他所様の記事で失敗話もなく、スムーズにいくんだろうと予測。</p>\n<p>私の場合は今回リベンジで、実のところサイトをつくって公開する前からダークモードはつけていました。<br>\nつまり開発環境developでは容易かったということ。</p>\n<p>まだNetlifyにホストしてた時にbuildしてもらえず、ダークモードの有無で公開を遅らせるのもなと、サイトヘッダーのナビゲーションなど「コメントアウト」してやり過ごしてたのを今回あらためて実装した経緯。</p>\n<p>もちろんNetlifyに原因はなくて、Gatsby Cloudでも同じようにエラーになって、きちんとメッセージを読んで対応したら生きた。</p>\n<p>インストールが少しだけ特殊なのかも。</p>\n\n        <div class=\"gatsby-code-title\">\n          <span>bash</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> gatsby-plugin-use-dark-mode use-dark-mode</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>これで開発環境では即動くんだけども、package.jsonに書き込みがされず、紐付けされないものをBuildはできないですよとホスト先に断られる。</p>\n<p>もっというと、publicフォルダをレンタルサーバーにごそっとアップしたら動いてました。まぁそこで自分の手が足りないだけと確信します。さらに開発者のおっさーんのサングラス顔を見て絶対強者を確信します。笑</p>\n<p><a href=\"https://github.com/donavon\">donavon (Donavon West) · GitHub</a></p>\n<hr>\n<p>どうやらReactのバージョンが高くて、<strong>--legacy-peer-deps</strong> をオプションでつければ\n<strong>npm i use-dark-mode</strong> でいけるんだろうな...というエラーメッセージ。（長いので転記しませんが）</p>\n\n        <div class=\"gatsby-code-title\">\n          <span>bash</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> code ERESOLVE\n<span class=\"token function\">npm</span> ERR<span class=\"token operator\">!</span> ERESOLVE could not resolve</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>翻訳かけると<br>\nールートプロジェクトからのreact@「^18.0.0」を見つけました<br>\nピアreact@\"^16.8.0\" from use-dark-mode @ 2.3.1ー<br>\nと、仲間だ依存だ競合だという英単語でなんとなーく状況を理解<br></p>\n<p>legacy-peerなんて言われるとちと不安になりますが、<a href=\"https://www.npmjs.com/package/use-dark-mode?activeTab=readme\">use-dark-mode - npm</a>　Weekly Downloads：12,590<br>\nレガシーどころかバリ現役じゃん、これは私がpackage.jsonに記載させるとこまで漕ぎつければ何の問題もない。</p>\n<p>ということで、gatsby-plugin-use-dark-modeプラグインと、カスタムReact Hook : use-dark-modeを1つずつ<strong>npm i</strong> して、package.jsonの変化をGitで確認してと手堅くゆっくりやりました。</p>\n</section>\n<section style=\"margin-bottom: 8em;\">\n<p><a href=\"https://www.npmjs.com/package/use-dark-mode?activeTab=readme\">use-dark-mode - npm</a> の <a href=\"https://www.npmjs.com/package/use-dark-mode?activeTab=dependencies\">Dependents (50)</a> タブではけっこうな数のGatsby ThemaやStarterが載っていたので、躓いた方に見つけて欲しい。週に13,000て他のReact勢にも使われてますよね。</p>\n\n        <div class=\"gatsby-code-title\">\n          <span>bash</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i use-dark-mode --legacy-peer-deps</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</section>\n<section style=\"margin-bottom: 5em;\">\n<h2>三分岐のダークモードが欲しい。</h2>\n<p>三畳半の作業部屋では、LED電球2つ以外は真っ暗にしてモニターを見ているわたくし。<br>\n生活がダークモードですが、このサイトのデフォルトは白でした。<br></p>\n<p>で、自分がよく見にいく2つのサイトが生粋のダークモード対応でOSに倣うタイプ。<br>\nMacをLightモードにするのはきついし、ブラウザも同じく。<br>\nたまーにOSをLightモードにして読んだりもするけど、暗い場所で明るいモードを見たい個人的な好みからすると<a href=\"https://developer.mozilla.org/ja/\">MDN</a>の3択が理想。</p>\n<p>外観としては、Codepenで見かけた<a href=\"https://codepen.io/havardob/pen/dyOJyje\">Light / Dark / Black Theme</a>が全員嬉しい感。</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/782be93deb8306c61e7bc9b1b38a1700/0b533/2023-06-19-3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 67.60000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0klEQVR42o2S2W7aQBSG4Q2IFzDYMzbe7bExNlscZ6FEVZKLFilS71qpzwYuYrEh5ClYL/DkgSpDG4VWbTj6dObq03/OzGQ2+9puN7vdLnm3drvtdrv5XZnDsVwuoygOw8FwOB6NJ6PREeNxymg0iaJ4sVi8+pn1ep0kyWz2VHGajeaVblQhrwplPUVIO+RVAGQAFQBlyKuDwRDjZLVapfJqtcY4mcYzUdKR5QJePiMKBMkQJENSDEEWmCIvyUiUzLJosJzU64cY41/yIXk+f6YoJpcjIBSQ5WSzWTpfKJdlCAXIq5+6Xx+/fO8+fhMlq9cLX16O5dlszgGJIBk6z9J5LneWJ0iGoksUXSqWBEE0RQmJEuKA3O//OErGOImnU81wFNVWNVs3HMN0DbNqIk9WLABlDkgpXNrD8E8ZR1FsIs9EXr0RXN98vAg6wWXn/qF77rdLrLj3U1hO6od/J8dTZNVN5Gl6RdPTZBO5smIdnFf+I9c03fFq/rnfbn+4u7v/fHl1C3mVTad9T7YrDdPyKk7Tq/kckCmaY4rCqcmWXdcNF1k11/MPXwJA5RQZTyZRy7+5CDr1RtC5fWi2rt9Oe9LOxv7Cqm5LUe1/yW+f6idlSWCQyWSbigAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3ThemeMode\" title=\"\" src=\"/static/782be93deb8306c61e7bc9b1b38a1700/0b533/2023-06-19-3.png\" srcset=\"/static/782be93deb8306c61e7bc9b1b38a1700/63868/2023-06-19-3.png 250w,\n/static/782be93deb8306c61e7bc9b1b38a1700/0b533/2023-06-19-3.png 500w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>ダークモードでも発色ゼロの漆黒Blackじゃないと目にきびしいという方もいれば、私は逆に「#000000」は、きつすぎてエディターのテーマなどでも敬遠します。<br>\n「濃灰色」止まり。</p>\n<p>このCodepenのをlocalStorage保存つきで実装できれば便利だと思うものの、書けない。</p>\n</section>\n<section style=\"margin-bottom: 5em;\">\n既存のプラグインのコードを見ると、表題の三項演算子が大活躍なんですよね。<br>\n二択はONとOFF、\n<p>disable\nenable</p>\n<p>true\nfalse　だから確実であり小難しくないし、我儘なやつ以外はそれで十分と思われているダークモードはさておき。</p>\n</section>\n<section style=\"margin-bottom: 6em;\">\n前記事でGatsby Head APIに移行した際に、それまで私はこの「三項演算子」をIF文だと思い込んで見てたんです。実態を知ると（おもしろいなー）となり、これ四項はないの？と冗談のようなことを考えて探しにいき、\nあぁやっぱり \n<strong>\nif-elseif-else\n</strong>\nなんだ ーな書き方を知りました。\n<p><a href=\"https://qiita.com/riekure/items/e510dba2e507403d990a?utm_source=pocket_saves\">条件式が複数ある三項演算子に混乱した話 - Qiita</a></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">String str <span class=\"token operator\">=</span> 条件式<span class=\"token number\">1</span> <span class=\"token operator\">?</span> 条件式<span class=\"token number\">2</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"A\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"B\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"C\"</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>条件1 &#x26; 条件式2 が正なら : A<br>\n条件1 だけが正なら : B<br>\n条件1 &#x26; 条件式2 が負なら : C<br>\n条件1 が負で条件式2が正も : C<br></p>\n<p>且つ、または、and orで簡潔に文章化できないんですが</p>\n<p>true &#x26;&#x26; true = 1<br>\ntrue &#x26;&#x26; false = 2<br>\nfalse &#x26;&#x26; false = 3<br>\nfalse &#x26;&#x26; true = 3<br></p>\n<p>というよりは</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">String str <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>条件式<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">(</span>条件式<span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>正 <span class=\"token punctuation\">{</span>\n\tstr <span class=\"token operator\">=</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token function\">elseif</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">条件式<span class=\"token number\">1</span><span class=\"token operator\">:</span>正</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tstr <span class=\"token operator\">=</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\tstr <span class=\"token operator\">=</span> <span class=\"token string\">\"C\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>条件1を主眼とした3分岐なんですね。<br></p>\n<p>最初はクソ真面目に↓の書き方をしてみたけど応えは4種あるようで、3種なんで、三項演算子の拡張版（？）と理解。<br>\n楽しいなぁー。 IF( )</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">String str <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>条件式<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">(</span>条件式<span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>正 <span class=\"token punctuation\">{</span>\n\tstr <span class=\"token operator\">=</span> <span class=\"token string\">\"A\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token function\">elseif</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">条件式<span class=\"token number\">1</span><span class=\"token operator\">:</span>正</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tstr <span class=\"token operator\">=</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token function\">elseif</span> <span class=\"token punctuation\">(</span>条件式<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">(</span>条件式<span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>負 <span class=\"token punctuation\">{</span>\n\tstr <span class=\"token operator\">=</span> <span class=\"token string\">\"C\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token function\">elseif</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">条件式<span class=\"token number\">2</span><span class=\"token operator\">:</span>正</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tstr <span class=\"token operator\">=</span> <span class=\"token string\">\"C\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>人はたらればを云うなぁ！と言いますが、もし〜ならば、ほど美味いものあるかいっ　と思ったりします。うふ。</p>\n</section>\n<!-- EOF -->","timeToRead":5,"frontmatter":{"title":"部屋とTシャツとダークモードと三項演算子","date":"2023/06/19","description":"ダークモード実装と三項演算子","slug":"note-07-darkMode-ternaryOperator","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJklEQVR42kXR3U/TUBgG8N7Q7Xy055z2tOd0bbfRbTAGboPoGMF0wpABWwQ1om7E8KUhBhMkokT8IITAjSGBRKMm6BWYmHBj4oX/nZYb/4Bfnud5XwXALoRiGKnCZgmHa7pWKpau15vh9Px4q1MKZ8N6Y7Rxb6o15/mujoFh6L4nhE2koEocqBjFL7EhhaETku/JVkfDdvvB+50X73ZerawsLS8vNlszftKnGmAU+550BBM2UQDowiiGYCzCFqNE9/x0JvCO9zd/nx9/P9n9df7x9cZqb6HYV+jXUYwQ5LnCkabF/+OotuSUEa07yAvH3Xn++Ofnlyd79398PWhNjaXSmXyQ1jHQNOAmbClNg2kKgBHGKGZZxKQYI2Capi297WcLF98OjvY3vhztTk/Uegplz5UAqBjHHcmlMBnFCoDRZghVadM7Q1fGc6mstExGbjdvXJwefvrwdm/76cjwtcHqWLM6EmaSpo6EMBOORQlWYISj2twkDyuDa8PlW4VsnzQgwutPFo4Pt1zJpRdUisWtqcnVSpnryOI0IXmUDIGKkIqhqhFU8ORENkl1zZc8lyK9ue7Jeug7bKaW8Vzen/ZrmSRGMdtijuSMIAUAFcEomVLsWyywmO3l1ubzm+2AUSzdxNXB5J/Tm525Ac6opBjj+OVTTaJDBYJIQqgyig0CGKNBobK9OPBmra8+W210GneX6mdH4fqjIV3DEHZpl1jYxr9r/wVWmmEYT8mEPwAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/1c46a54b482006147ce8be7cdb40dc59/8267e/2023-06-19-fi.png","srcSet":"/static/1c46a54b482006147ce8be7cdb40dc59/669a0/2023-06-19-fi.png 339w,\n/static/1c46a54b482006147ce8be7cdb40dc59/f33cc/2023-06-19-fi.png 679w,\n/static/1c46a54b482006147ce8be7cdb40dc59/8267e/2023-06-19-fi.png 1357w","sizes":"(min-width: 1357px) 1357px, 100vw"},"sources":[{"srcSet":"/static/1c46a54b482006147ce8be7cdb40dc59/45eab/2023-06-19-fi.webp 339w,\n/static/1c46a54b482006147ce8be7cdb40dc59/f80b4/2023-06-19-fi.webp 679w,\n/static/1c46a54b482006147ce8be7cdb40dc59/827f4/2023-06-19-fi.webp 1357w","type":"image/webp","sizes":"(min-width: 1357px) 1357px, 100vw"}]},"width":2000,"height":1031.6875460574797}}}}}},"pageContext":{"slug":"note-07-darkMode-ternaryOperator","previous":null,"next":"note-05-Hello-GatsbyHeadAPI","previousTitle":null,"nextTitle":"React-helmetを脱いでGatsby Head APIを冠る","id":"bf97987d-cda4-5fe0-94da-fbe22ca29752"}},"staticQueryHashes":["2507079572"],"slicesMap":{}}